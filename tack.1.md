% TACK(1)
% Robert Lillack
% July 2021

# NAME

tack - a static site generator for the long run

# SYNOPSIS

**tack** [*ACTION*] [*SITEDIR*]

# DESCRIPTION

Tack reads website sources, like Mustache HTML templates, Markdown content markup, and YAML site & page variables, and “tacks them together” to create a static website that can easily be hosted anywhere.

The tool is completely self-contained and has no runtime dependencies. This ensures that updates to the websites you are creating now are still easily possible do a few years down the road.

# ACTIONS

**tack**
: Tack the site together into the folder `output`. This is the default action, if no verb is specified.

**serve**
: Tack the site together and start a web server on port `8080` which can be used to get a live preview of the tacked website. Changes to the source files (content, templates, assest, ...) are re-tacked and reflected in the served site automatically.

**help**
: Display a friendly help message.

# SITE DIRECTORY

The optional _SITEDIR_ argument refers to a directory that contains the sources
of the website project that should be built by tack.

If this argument is not specified, tack uses the current working directory.

A valid _SITEDIR_ contains:

- `content` directory with at least a single metadata (`*.yaml`) or markup (`*.md`) file
- `templates` subdirectory with at least a single template file (`*.mustache`)
- Optionally: a `public` subdirectory with static files
- Optionally: a `site.yaml` metadata file to define some site variables

# PAGE TYPES

A page is added to the site by creating a directory somewhere below `content/`. This page directory needs to contain at least a single metadata or markup file. Based on the directory name, tack differentiates between three types of pages:

Regular (or ordered) pages
: A page that will show up in the **menu**, **navigation**, **siblings** variables so it can be iterated over. The order of pages on the same level is determined by the position given as part of the directory name, ie. _001-about-us_, or _2.products_

Floating pages
: A page which is not part of the navigation structure of the site. So, if you don't see a need for automatically created menus or you want to exclude individual pages from the menu, use floating pages. Pages are made floating by naming their directory without an enumeration or date prefix.

Posts
: A post is simple a page directory with a name prefixed with a date in the `yyyy-mm-dd` form. All posts contained in certain page are accessible using the **posts** list of their parent page. Posts will not show up in the **menu**, **navigation**, or **siblings** variables. Example page names are: _2012-08-25.first-release_ and _2021-06-06-tack-version-one_.

# TEMPLATES

All `*.mustache` files below _SITEDIR_/templates can be used to create HTML page output by filling them with page content. All templates are expected to be written in the Mustache template language.

The default template used to generate a page is called _default.template_. To use a different template, you can choose to:

- Create a metadata file in the page directory.

  The basename of said file will be regarded as the template name. If, for example, a metadata file like _SITEDIR_/content/about-us/simple.yaml exists, the page /about-us will be rendered using the template from _SITEDIR_/templates/simple.mustache

- Specify a `template` variable as part of the YAML frontmatter in any of the pages' markup files.

  If, for example, the markup file _SITEDIR_/content/about-us/body.md contains frontmatter like this:

  ```
  ---
  template: simple
  ---

  # This is the actual Markdown content
  ```

  The same template from _SITEDIR_/templates/simple.mustache  would be used.

# PAGE VARIABLES

For each rendered page, a set of variables will be available to fill into
the chosen template. These variables are read from the page's metadata files.

Next to the user-specified variables, these per-page ones are automatically generated by tack:

`permalink`
: An absolute link to the referenced page.

`slug`
: Last part of the directory name, stripped of any enumeration prefixes.

`name`
: A titlecased version of slug. This page variable can be overwritten using a YAML metadata file or YAML frontmatter.

`current`
: Boolean to signify if the referenced page is the one currently being rendered (useful to build active elements in navigation menus).

`date`
: (Only if this page is a post) Publishing date of the current page in the form `yyyy-mm-dd`.

`first`
: (Only if this page is being iterated over as part of a list) Boolean to signify if the referenced page is the first one of the list.

`last`
: (Only if this page is being iterated over as part of a list) Boolean to signify if the referenced page is the first one of the list.

# RENDERING CONTEXT

Additionally to the page variables listed above, when rendering a page, these variables are availble to the template, too:

`parent`
: An object detailing the parent page (giving the variables listed above), if the current page is not a top-level one.

`siblings`
: List of all sibling pages.

`children`
: List of all child pages.

`posts`
: List of all child pages whose directory name starts with `yyyy-mm-dd`.

`ancestors`
: List of all ancestor pages.

`navigation`
: List of all toplevel pages to allow for building navigation menus.

`menu`
: List of all pages on the same level (siblings + current page) to allow for building navigation menus.

# EXIT STATUS

Tack returns a non-zero exit code if tacking the website was not successful due to being unable to read or process any of the input files or if the _output_ directory cannot be written to.

# BUGS

To report bugs, please go to create a ticket at https://github.com/roblillack/tack/issues

# SEE ALSO

jekyll(1)
